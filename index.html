<!DOCTYPE html>
<html>
<head>
	<title>krpano - webtorrent demo</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, viewport-fit=cover" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv="x-ua-compatible" content="IE=edge" />
	<script src="https://cdn.jsdelivr.net/webtorrent/latest/webtorrent.min.js"></script>
	<script src="https://momentjs.com/downloads/moment.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
    // ~/node_modules/create-torrent/bin/cmd.js "dir" -o "dir.torrent"
          var torrentId = 'https://tomasparks.name/krpano-and-webtorrent/tours/apartment.torrent'
          var panoJsonUrl = 'https://tomasparks.name/krpano-and-webtorrent/tours/apartment.json'
          var webSeedUrl = 'https://tomasparks.name/krpano-and-webtorrent/tours/'
          var rootUrl = 'apartment'
          var db = '{   "firstscene": "b-1",
	"scenes": [{
			"id": "b-1",
			"title":"Entrance",
			"files": {
				"preview": "preview.jpg",
				"thumb": "thumb.jpg"
			}
		},
		{
			"id": "b-2",
			"title":"Bedroom",
			"files": {
				"preview": "preview.jpg",
				"thumb": "thumb.jpg"
			}
		},
		{
			"id": "a-1",
			"title": "Livingroom / Kitchen",
			"files": {
				"preview": "preview.jpg",
				"thumb": "thumb.jpg"
			}
		}
	]
}'
    </script>
	 <style>
      #progressBar {
          height: 5px;
          width: 0%;
          background-color: #35b44f;
          transition: width .4s ease-in-out;
      }
      body.is-seed .show-seed {
          display: inline;
      }
      body.is-seed .show-leech {
          display: none;
      }
      .show-seed {
          display: none;
      }
      #status code {
          font-size: 90%;
          font-weight: 700;
          margin-left: 3px;
          margin-right: 3px;
          border-bottom: 1px dashed rgba(255,255,255,0.3);
      }

      .is-seed #hero {
          background-color: #154820;
          transition: .5s .5s background-color ease-in-out;
      }
      #hero {
          background-color: #2a3749;
      }
      #status {
          font-size: 17px;
          padding: 5px;
      }
    </style>
</head>
<body>

<script src="./viewer/krpano.js"></script>

<div id="pano" style="width:auto;height:400px;">
	<noscript><table style="width:100%;height:100%;"><tr style="vertical-align:middle;"><td><div style="text-align:center;">ERROR:<br/><br/>Javascript not activated<br/><br/></div></td></tr></table></noscript>
	<script>
	var krpano = null;
		embedpano({swf:"./viewer/krpano.swf", xml:"./pano.xml", target:"pano", html5:"auto", mobilescale:1.0, passQueryParameters:true,onready:krpano_onready_callback});
			function krpano_onready_callback(krpano_interface)
	{
		krpano = krpano_interface;
	}
	</script>
</div>
        <div id="progressBar"></div>
         <div id="status">
        <div>
          <span class="show-leech">Downloading </span>
          <span class="show-seed">Seeding </span>
          <span class="show-leech"> from </span>
          <span class="show-seed"> to </span>
          <code id="numPeers">0 peers</code>.
        </div>
        <div>
          <code id="downloaded"></code>
          of <code id="total"></code>
          — <span id="remaining"></span><br/>
          &#x2198;<code id="downloadSpeed">0 b/s</code>
          / &#x2197;<code id="uploadSpeed">0 b/s</code>
        </div>
      </div>
    </div>
    <script src="./js.js"></script>  
</body>
</html>
